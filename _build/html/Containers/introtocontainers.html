

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Introduction to containers &mdash; CyVerse Learning:    Foundational Open Science Skills 2021 spring-2021 documentation</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/cyverse.css" type="text/css" />
  <link rel="stylesheet" href="../_static/detail-expand.css" type="text/css" />
  <link rel="stylesheet" href="../_static/question-answer.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/cyverse.js"></script>
        <script src="../_static/detail-expand.js"></script>
        <script src="../_static/question-answer.js"></script>
        <script src="../_static/intercom-script-for-learning.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Launching a Docker app on Atmosphere" href="dockeronatmo.html" />
    <link rel="prev" title="GitHub Pages - a quick start" href="../documentation/githubpages.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> CyVerse Learning:    Foundational Open Science Skills 2021
          

          
          </a>

          
            
            
              <div class="version">
                spring-2021
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Workshop Home</a></li>
</ul>
<p class="caption"><span class="caption-text">Before FOSS Starts</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../before/installation.html"><strong>Pre-FOSS Setup</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Key Information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/schedule.html"><strong>Schedule</strong></a></li>
<li class="toctree-l1"><a class="reference external" href="https://www.cyverse.org/foss#instructors">Instructors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/code_of_conduct.html"><strong>Code of Conduct</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/open_sci_lab.html"><strong>Open Science Introductory Activity</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/goals.html">Goals and Approach</a></li>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/glossary.html"><strong>Glossary &amp; Acronyms</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Using CyVerse</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CyVerse/intro_to_cyverse.html"><strong>About CyVerse</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../CyVerse/data_store.html"><strong>Accessing Data Store</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../CyVerse/de-data-manage.html"><strong>Discovery Environment - Data Management</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Cyberinfrastructure</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cloud_comput/intro.html"><strong>Introduction to Cloud Computing</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud_comput/atmo.html"><strong>Atmosphere</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud_comput/xsede.html"><strong>Research Cyberinfrastructure associated with CyVerse</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../cloud_comput/cyberinfrastructure.html"><strong>Other Cyberinfrastructure Projects</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Data Management</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../Data_management/overview.html"><strong>Data Management Overview</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Data_management/FAIR.html"><strong>FAIR Data</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Data_management/dmp.html"><strong>Data Management Plans (DMP)</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Data_management/dmtools.html"><strong>Data Management Tools</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Essential Skills</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../CyVerse/de-data-analysis.html"><strong>Discovery Environment - Data Analysis</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../CyVerse/tool_integration_app_building_DE.html"><strong>Discovery Environment - Tools &amp; Apps</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../CyVerse/vice.html"><strong>Discovery Environment - VICE</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_essentials/commandline.html"><strong>Command Line and the Unix Shell</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../software_essentials/linux.html"><strong>Basics of Linux</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Reproducible Science</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reproducible_science/intro.html"><strong>Introduction to Reproducible Science</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reproducible_science/communication.html"><strong>Communication</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reproducible_science/GitHub.html"><strong>GitHub Overview</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../reproducible_science/GitHub.html#advanced-git-github-features">Advanced Git &amp; GitHub Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reproducible_science/websites.html"><strong>Websites &amp; Documentation</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation/githubpages.html"><strong>GitHub Pages - a quick start</strong></a></li>
</ul>
<p class="caption"><span class="caption-text">Containers</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#"><strong>Introduction to containers</strong></a><ul>
<li class="toctree-l2"><a class="reference internal" href="#what-is-a-container"><strong>What is a container?</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-use-containers"><strong>Why use containers?</strong></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#working-with-containers"><strong>Working with containers</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dockerdocs"><a href="https://docs.docker.com" target="blank">Docker</a></a></li>
<li class="toctree-l3"><a class="reference internal" href="#singularitydocs"><a href="https://sylabs.io/docs" target="blank">Singularity</a></a></li>
<li class="toctree-l3"><a class="reference internal" href="#kubernetesdocs"><a href="https://kubernetes.io/docs/home/" target="blank">Kubernetes</a></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#finding-pre-built-images"><strong>Finding pre-built images</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dockerhub"><a href="https://hub.docker.com" target="blank">Docker Hub</a></a></li>
<li class="toctree-l3"><a class="reference internal" href="#biocontainerreg"><a href="https://biocontainers.pro/#/registry" target="blank">BioContainers Registry</a></a></li>
<li class="toctree-l3"><a class="reference internal" href="#quayio"><a href="https://quay.io/" target="blank">Quay</a></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#hands-on"><strong>Hands-on</strong></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#how-to-install-docker">How to install Docker</a></li>
<li class="toctree-l3"><a class="reference internal" href="#get-data-to-use-with-your-container">Get data to use with your container</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-docker-pull-to-get-the-image">Use ‘docker pull’ to get the image</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-the-docker-run-command-to-run-the-container">Use the ‘docker run’ command to run the container</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-it-all-means">What it All Means</a></li>
<li class="toctree-l3"><a class="reference internal" href="#useful-links">Useful Links</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="dockeronatmo.html">Launching a Docker app on Atmosphere</a></li>
<li class="toctree-l1"><a class="reference internal" href="dockerintro.html"><strong>Introduction to Docker</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="dockeradvanced.html"><strong>Advanced Docker</strong></a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">CyVerse Learning:    Foundational Open Science Skills 2021</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><strong>Introduction to containers</strong></li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../_sources/Containers/introtocontainers.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <p><a class="reference external" href="http://learning.cyverse.org/"><img alt="CyVerse_logo" src="../_images/cyverse_learning.png" style="width: 500px;" /></a></p>
<p><a class="reference external" href="http://learning.cyverse.org/"><img alt="Home_Icon2" src="../_images/homeicon.png" style="width: 25px; height: 25px;" /></a>
<a class="reference external" href="http://learning.cyverse.org/">Learning Center Home</a></p>
<div class="section" id="introduction-to-containers">
<h1><strong>Introduction to containers</strong><a class="headerlink" href="#introduction-to-containers" title="Permalink to this headline">¶</a></h1>
<div class="section" id="what-is-a-container">
<h2><strong>What is a container?</strong><a class="headerlink" href="#what-is-a-container" title="Permalink to this headline">¶</a></h2>
<p>A container is a standard unit of software that packages up code and all its dependencies so the application runs quickly and reliably from one computing environment to another. A container image includes everything needed to run an application: code, runtime, system tools, system libraries and settings.</p>
<div class="section" id="why-use-containers">
<h3><strong>Why use containers?</strong><a class="headerlink" href="#why-use-containers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><strong>Flexible:</strong> Even the most complex applications can be containerized.</p></li>
<li><p><strong>Lightweight:</strong> Containers leverage and share the host kernel, making them much more efficient in terms of system resources than virtual machines.</p></li>
<li><p><strong>Portable:</strong> You can build locally, deploy to the cloud, and run anywhere.</p></li>
<li><p><strong>Loosely coupled:</strong> Containers are highly self sufficient and encapsulated, allowing you to replace or upgrade one without disrupting others.</p></li>
<li><p><strong>Scalable:</strong> You can increase and automatically distribute container replicas across a datacenter.</p></li>
<li><p><strong>Secure:</strong> Containers apply aggressive constraints and isolations to processes without any configuration required on the part of the user.</p></li>
</ul>
<p>We can move and scale our containerized applications; containers effectively guarantee that those applications will run the same way anywhere, allowing us to quickly and easily take advantage of all these environments.</p>
</div>
</div>
<div class="section" id="working-with-containers">
<h2><strong>Working with containers</strong><a class="headerlink" href="#working-with-containers" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p><strong>Image:</strong> self-contained, read-only ‘snapshot’ of your applications and packages, with all their dependencies</p></li>
<li><p><strong>Container:</strong> A virtualization of an operating system run within an isolated user space. A running instance of an image.</p></li>
</ul>
<p><a class="reference internal" href="../_images/docker.png"><img alt="docker" src="../_images/docker.png" style="width: 250px;" /></a></p>
<div class="section" id="dockerdocs">
<h3><a href="https://docs.docker.com" target="blank">Docker</a><a class="headerlink" href="#dockerdocs" title="Permalink to this headline">¶</a></h3>
<p>Docker is a platform  to build, share, and run applications with containers. Docker Engine is available on a variety of <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu" target="blank">Linux platforms</a> , <a href="https://docs.docker.com/docker-for-mac/install" target="blank">Mac</a> and <a href="https://docs.docker.com/docker-for-windows/install" target="blank">Windows</a> through Docker Desktop.</p>
<p>Docker images are built from Dockerfiles. A <strong>Dockerfile</strong> is a text document that contains all the commands you would normally execute manually in order to build a Docker image. Docker can build images automatically by reading the instructions from a Dockerfile.</p>
<p><a href="https://cyverse-creating-docker-containers-quickstart.readthedocs-hosted.com/en/latest/step3.html" target="blank">More information on building Docker images</a></p>
<p>Once you have a Docker image you can:</p>
<ul class="simple">
<li><p>run it as a container (anywhere)</p></li>
<li><p>push it to a registry (make it available to others)</p></li>
<li><p>link it to GitHub with automated builds</p></li>
</ul>
<p>Other things to note about Docker:</p>
<ul class="simple">
<li><p>Docker <strong>always runs as root</strong>. This makes it unsuitable for use on large computing systems with many users such as HPC.</p></li>
<li><p>Docker images and containers are <strong>stored in the Docker directory</strong> (where Docker is installed) so you won’t see them in a list of your files. There are special Docker commands you can use to list/remove them.</p></li>
</ul>
<p><a class="reference internal" href="../_images/singularity.png"><img alt="singularity" src="../_images/singularity.png" style="width: 150px;" /></a></p>
</div>
<div class="section" id="singularitydocs">
<h3><a href="https://sylabs.io/docs" target="blank">Singularity</a><a class="headerlink" href="#singularitydocs" title="Permalink to this headline">¶</a></h3>
<p>Singularity was created to run complex applications on HPC clusters in a simple, portable, and reproducible way. You are the <strong>same user inside a container as outside</strong>, and cannot gain additional privilege on the host system by default.</p>
<p>Singularity images are built from <a class="reference external" href="https://sylabs.io/guides/3.5/user-guide/cli/singularity_build.html">definition files</a>. Like Dockerfiles, they provide a list of commands necessary to build the image. They also have a very specific format although it is a different format from Dockerfiles.</p>
<p>Fortunately, Singularity will automatically convert and run Docker images (so you may not need to learn how to build a Singularity image at all).</p>
<p>Once built, the Singularity image will be saved as a .sif file in your local working directory. You can easily see your image when you list your files but you may have images files saved to lots of different directories.</p>
<p><a class="reference internal" href="../_images/kubernetes.png"><img alt="kubernetes" src="../_images/kubernetes.png" style="width: 150px;" /></a></p>
</div>
<div class="section" id="kubernetesdocs">
<h3><a href="https://kubernetes.io/docs/home/" target="blank">Kubernetes</a><a class="headerlink" href="#kubernetesdocs" title="Permalink to this headline">¶</a></h3>
<p>Kubernetes automates the distribution and scheduling of application containers across a cluster in a more efficient way. This allows you to scale-up your analyses as necessary.</p>
<p>A Kubernetes cluster consists of two types of resources:</p>
<ul class="simple">
<li><p><strong>master node:</strong> responsible for deciding what runs on all of the cluster’s nodes. This can include scheduling workloads, like containerized applications, and managing the workloads’ lifecycle, scaling, and upgrades. The master also manages network and storage resources for those workloads.</p></li>
<li><p><strong>worker node:</strong> A cluster typically has one or more nodes, which are the worker machines that run your containerized applications and other workloads. Each node is managed from the master, which receives updates on each node’s self-reported status.</p></li>
</ul>
<p><a class="reference internal" href="../_images/containers1.png"><img alt="cluster" src="../_images/containers1.png" style="width: 500px;" /></a></p>
<p>More worker nodes = more compute power. This means you can easily scale your app to run much faster/with larger datasets.</p>
<p>Once the application instances are created, a Kubernetes Deployment Controller continuously monitors those instances. If the Node hosting an instance goes down or is deleted, the Deployment controller replaces the instance with an instance on another Node in the cluster. This provides a self-healing mechanism to address machine failure or maintenance.</p>
</div>
</div>
<div class="section" id="finding-pre-built-images">
<h2><strong>Finding pre-built images</strong><a class="headerlink" href="#finding-pre-built-images" title="Permalink to this headline">¶</a></h2>
<p><strong>Image registry:</strong> a storage and content delivery system, such as that used by Docker</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Only use images from trusted sources or images for which you can see the Dockerfile. An image from an untrusted source could contain something other than what it’s labeled (eg. malware). If you can see the Dockerfile you can see exactly what is in the image.</p>
</div>
<div class="section" id="dockerhub">
<h3><a href="https://hub.docker.com" target="blank">Docker Hub</a><a class="headerlink" href="#dockerhub" title="Permalink to this headline">¶</a></h3>
<p>Docker Hub is a service provided by Docker for finding and sharing container images with your team. It provides the following major features:</p>
<ul class="simple">
<li><p><strong>Repositories:</strong> Push and pull container images.</p></li>
<li><p><strong>Teams &amp; Organizations:</strong> Manage access to private repositories of container images.</p></li>
<li><p><strong>Official Images:</strong> Pull and use high-quality container images provided by Docker.</p></li>
<li><p><strong>Publisher Images:</strong> Pull and use high- quality container images provided by external vendors. Certified images also include support and guarantee compatibility with Docker Enterprise.</p></li>
<li><p><strong>Builds:</strong> Automatically build container images from GitHub and Bitbucket and push them to Docker Hub.</p></li>
<li><p><strong>Webhooks:</strong> Trigger actions after a successful push to a repository to integrate Docker Hub with other services.</p></li>
</ul>
<p>Docker Hub is the most well-known and popular image registry for Docker containers.</p>
<p><a class="reference internal" href="../_images/biocontainers5a.png"><img alt="biocontainerlogo" src="../_images/biocontainers5a.png" style="width: 300px;" /></a></p>
</div>
<div class="section" id="biocontainerreg">
<h3><a href="https://biocontainers.pro/#/registry" target="blank">BioContainers Registry</a><a class="headerlink" href="#biocontainerreg" title="Permalink to this headline">¶</a></h3>
<p>BioContainers is a community-driven project that provides the infrastructure and basic guidelines to create, manage and distribute bioinformatics containers with <strong>special focus in proteomics, genomics, transcriptomics and metabolomics</strong>. BioContainers is based on the popular frameworks of Docker.</p>
<p>Although anyone can create a BioContainer, the majority of BioContainers are created by the Bioconda project. Every Bioconda package has a corresponding BioContainer available at Quay.io.</p>
<p><a class="reference internal" href="../_images/biocontainers13.png"><img alt="biocondalogo" src="../_images/biocontainers13.png" style="width: 250px;" /></a></p>
<ul class="simple">
<li><p><strong>package manager:</strong> collection of software tools that automates the process of installing, upgrading, configuring, and removing computer programs for a computer’s operating system in a consistent manner</p></li>
<li><p><a href="https://bioconda.github.io" target="blank">Bioconda</a> is a channel for the conda package manager specializing in bioinformatics software. It consists of:</p></li>
<li><p>Over 800 contributors that add, modify, update and maintain the recipes</p></li>
<li><p>A repository of &gt; 7000 bioinformatics packages ready to use</p></li>
<li><p><strong>Each package added to Bioconda also has a corresponding Docker BioContainer automatically created and uploaded to Quay.io</strong></p></li>
<li><p>You can <a class="reference external" href="https://bioconda.github.io/contributing.html">contribute</a> to the Bioconda project by building your own packages. Each package will also be made available as a BioContainer at <a href="https://quay.io/" target="blank">Quay</a></p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The BioContainers registry search returns partial matches and matches to the tool description. So, if you want to find all the tools relevant to Nanopore analysis you can search for ‘nanopore’.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You want the docker images, not the Conda packages. Conda packages are not containers.</p>
</div>
</div>
<div class="section" id="quayio">
<h3><a href="https://quay.io/" target="blank">Quay</a><a class="headerlink" href="#quayio" title="Permalink to this headline">¶</a></h3>
<p>Quay is another general image registry. It works the same way as Docker Hub. However, Quay is home to all BioContainers made by the Bioconda project. Now we will find a BioContainer image at Quay, pull that image and run it on cloud virtual machine.</p>
</div>
</div>
<div class="section" id="hands-on">
<h2><strong>Hands-on</strong><a class="headerlink" href="#hands-on" title="Permalink to this headline">¶</a></h2>
<p>To run your BioContainer you will need a computer with Docker installed.</p>
<p>Launch this Atmosphere instance: <strong>Ubuntu 18.04 GUI XFCE Base</strong></p>
<div class="section" id="how-to-install-docker">
<h3>How to install Docker<a class="headerlink" href="#how-to-install-docker" title="Permalink to this headline">¶</a></h3>
<p>Installing Docker on your computer takes a little time but it is reasonably straight forward and it is a one-time setup. <a href="https://learning.cyverse.org/projects/container_camp_workshop_2019/en/latest/docker/dockerintro.html" target="blank">How to install Docker</a>.</p>
<p>Docker installation is much easier on an Atmosphere instance with the ‘ezd’ command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ezd
</pre></div>
</div>
</div>
<div class="section" id="get-data-to-use-with-your-container">
<h3>Get data to use with your container<a class="headerlink" href="#get-data-to-use-with-your-container" title="Permalink to this headline">¶</a></h3>
<p><a href="https://cyverse-data-store-quickstart.readthedocs-hosted.com/en/latest/" target="blank">Install iCommands</a></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ <span class="nb">cd</span> Desktop
$ iget /iplant/home/shared/iplantcollaborative/example_data/porechop/SRR6059710.fastq
</pre></div>
</div>
</div>
<div class="section" id="use-docker-pull-to-get-the-image">
<h3>Use ‘docker pull’ to get the image<a class="headerlink" href="#use-docker-pull-to-get-the-image" title="Permalink to this headline">¶</a></h3>
<p>Go to <a href="https://quay.io/" target="blank">Quay</a> and search for ‘porechop’ in the search bar at the top of the page.</p>
<p>Click on the ‘tag’ icon on the left side of the screen to show all the available ‘porechop’ images.</p>
<p><a class="reference internal" href="../_images/biocontainers3.png"><img alt="biocontainers3" src="../_images/biocontainers3.png" style="width: 750px;" /></a></p>
<p>Click the ‘fetch tag’ icon at the right and choose ‘Docker pull (by tag)’ from the dropdown. This will copy the docker pull command that we will need on the command line.</p>
<p><a class="reference internal" href="../_images/biocontainers8.png"><img alt="biocontainers8" src="../_images/biocontainers8.png" style="width: 750px;" /></a></p>
<p>Now you will need to pull the image from the registry onto your computer. Use the ‘docker pull’ command you copied from the registry above.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are working on a system for which you don’t have root permissions you will need to use ‘sudo’ and provide your password. Like this:</p>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo docker pull quay.io/biocontainers/porechop:0.2.3_seqan2.1.1--py36h2d50403_3
</pre></div>
</div>
<p><a class="reference internal" href="../_images/biocontainers11.png"><img alt="pullquayio" src="../_images/biocontainers11.png" style="width: 750px;" /></a></p>
</div>
<div class="section" id="use-the-docker-run-command-to-run-the-container">
<h3>Use the ‘docker run’ command to run the container<a class="headerlink" href="#use-the-docker-run-command-to-run-the-container" title="Permalink to this headline">¶</a></h3>
<p>The easiest way to test the container to run the help command for the tool. In this case ‘-h’ is the help command.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo docker run --rm -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/working-dir -w /working-dir --entrypoint<span class="o">=</span><span class="s2">&quot;porechop&quot;</span> quay.io/biocontainers/porechop:0.2.3_seqan2.1.1--py36h2d50403_3 -h
</pre></div>
</div>
<p>From the result we are able to see the only required option is ‘-i INPUT’. Options in [square brackets] are not required.</p>
<p>Now we can run the container with our data file to see the output.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ sudo docker run --rm -v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/working-dir -w /working-dir --entrypoint<span class="o">=</span><span class="s2">&quot;porechop&quot;</span> quay.io/biocontainers/porechop:0.2.3_seqan2.1.1--py36h2d50403_3 -i SRR6059710.fastq -o porechop_output.fastq
</pre></div>
</div>
<p>We can break the command down into pieces so it is easier to read (the backslash represents where we have broken the line).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo <span class="se">\</span>
docker run <span class="se">\</span>
--rm <span class="se">\</span>
-v <span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>:/working-dir <span class="se">\</span>
-w /working-dir <span class="se">\</span>
--entrypoint<span class="o">=</span><span class="s2">&quot;porechop&quot;</span> <span class="se">\</span>
quay.io/biocontainers/porechop:0.2.3_seqan2.1.1--py36h2d50403_3 <span class="se">\</span>
-i SRR6059710.fastq <span class="se">\</span>
-o porechop_out.fastq
</pre></div>
</div>
</div>
<div class="section" id="what-it-all-means">
<h3>What it All Means<a class="headerlink" href="#what-it-all-means" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>‘sudo’ allows you to run the container with ‘root’ permissions–only required if you don’t have root permissions on your machine</p></li>
<li><p>‘docker run’ tells docker to run the container</p></li>
<li><p>‘–rm’ removes the container (not the image) from your system when the analysis is complete</p></li>
<li><p>‘-v’ mounts a <em>local</em> directory into a directory <em>within the container</em></p></li>
<li><p>‘-w’ specifies the working directory within the container</p></li>
<li><p>‘–entrypoint’ tells the container what to do (usually the name of the tool; the command you would use to run the tool on the command line)</p></li>
<li><p>‘quay.io/biocontainers/porechop:0.2.3_seqan2.1.1–py36h2d50403_3’ is the name of the image we pulled from Quay.io</p></li>
<li><p>‘-i’ is the argument for the input file (FASTQ) for Porechop</p></li>
<li><p>‘-o’ is the arguemnt for the output file (trimmed FASTQ) for Porechop</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>You must supply an entrypoint on the command line when you run a BioContainer. It is possible to build entrypoints into a container but that is not he case with BioContainers.</p>
</div>
<p><a class="reference internal" href="../_images/biocontainers6.png"><img alt="porechoprun" src="../_images/biocontainers6.png" style="width: 750px;" /></a>
<a class="reference internal" href="../_images/biocontainers1.png"><img alt="porechoptrim" src="../_images/biocontainers1.png" style="width: 750px;" /></a>
<a class="reference internal" href="../_images/biocontainers2.png"><img alt="porechopdone" src="../_images/biocontainers2.png" style="width: 750px;" /></a></p>
<p>The output from Porechop is saved into the working directory within the container. We ran the container we mounted our current <em>local</em> working directory into the working directory <em>within the container</em>. The analysis has finished, the container has been removed (remember –rm) and now we should find our outputs in our <em>local</em> current working directory.</p>
<p>List the files:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$ ls -l
</pre></div>
</div>
<p><a class="reference internal" href="../_images/biocontainers12.png"><img alt="porechopout" src="../_images/biocontainers12.png" style="width: 750px;" /></a></p>
<p>You can see the ‘porechop_out.fastq’ file is in our current working directory. Notice that the this file is owned by ‘root’. This is because Docker containers always run as ‘root’.</p>
<p>At this point you can run your container on any system with Docker installed. To use this container on an HPC system you will need to use Singularity (rather than Docker) to run your container. For more information about running Docker containers with Singularity see the <a class="reference external" href="https://singularity.lbl.gov/quickstart">Singularity documentation</a></p>
</div>
<div class="section" id="useful-links">
<h3>Useful Links<a class="headerlink" href="#useful-links" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><a class="reference external" href="https://biocontainers.pro/#/">BioContainers</a></p></li>
<li><p><a class="reference external" href="https://bioconda.github.io/">Bioconda</a></p></li>
<li><p><a class="reference external" href="http://github.com/BioContainers/containers/issues">Request a BioContainer</a></p></li>
<li><p><a class="reference external" href="https://singularity.lbl.gov/quickstart">Singularity documentation</a></p></li>
<li><p><a class="reference external" href="https://github.com/BioContainers/specs#33-how-to-create-a-docker-based-biocontainer">BioContainers contribution guidelines</a></p></li>
<li><p><a class="reference external" href="http://github.com/BioContainers/containers/issues">Report BioContainers problems</a></p></li>
</ul>
<p>Some examples of public/private registries to consider for your research needs:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://cloud.docker.com/">Docker Cloud</a></p></li>
<li><p><a class="reference external" href="https://hub.docker.com/">Docker Hub</a></p></li>
<li><p><a class="reference external" href="https://docs.docker.com/ee/dtr/">Docker Trusted Registry</a></p></li>
<li><p><a class="reference external" href="https://aws.amazon.com/ecr/">Amazon Elastic Container Registry</a></p></li>
<li><p><a class="reference external" href="https://aws.amazon.com/ecr/">Google Container Registry</a></p></li>
<li><p><a class="reference external" href="https://azure.microsoft.com/en-us/services/container-registry/">Azure Container Registry</a></p></li>
<li><p><a class="reference external" href="https://ngc.nvidia.com/catalog/containers">NVIDIA GPU Cloud</a></p></li>
<li><p><a class="reference external" href="https://private-docker-registry.com/">Private Docker Registry</a> - not official Docker</p></li>
<li><p><a class="reference external" href="https://docs.gitlab.com/ce/administration/container_registry.html">Gitlab Container Registry</a></p></li>
<li><p><a class="reference external" href="https://quay.io/">Quay</a></p></li>
<li><p><a class="reference external" href="https://treescale.com/">TreeScale</a></p></li>
<li><p><a class="reference external" href="https://www.canister.io/">Canister</a></p></li>
<li><p><a class="reference external" href="https://biocontainers.pro/#/registry">BioContainers Registry</a></p></li>
</ul>
<hr class="docutils" />
<p><strong>Fix or improve this documentation:</strong></p>
<ul class="simple">
<li><p>On Github: <a href="https://github.com/CyVerse-learning-materials/foss-2019/tree/master/Containers/biocontainers.rst" target="blank">Github Repo Link</a></p></li>
<li><p>Send feedback: <a class="reference external" href="mailto:Tutorials&#37;&#52;&#48;CyVerse&#46;org">Tutorials<span>&#64;</span>CyVerse<span>&#46;</span>org</a></p></li>
</ul>
<hr class="docutils" />
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="dockeronatmo.html" class="btn btn-neutral float-right" title="Launching a Docker app on Atmosphere" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="../documentation/githubpages.html" class="btn btn-neutral float-left" title="GitHub Pages - a quick start" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2021, CyVerse.

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>